<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			body,
			ul,
			li {
				margin: 0;
				padding: 0;
				list-style: none;
			}
		</style>
		<link rel="stylesheet" type="text/css" href="price.css" />
	</head>

	<body onselectstart="return false;">
		<div class="wrap">
			<div class="box">
				<ul class="list" id="list">
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价：<strong class="price">12.5元 </strong> 小计：<strong class="sum">0元</strong>
						</span>
					</li>
					
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价：<strong class="price">10.5元 </strong> 小计：<strong class="sum">0元</strong>
						</span>
					</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价：<strong class="price">8.5元 </strong> 小计：<strong class="sum">0元</strong>
						</span>
					</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价：<strong class="price">8元 </strong> 小计：<strong class="sum">0元</strong>
						</span>
					</li>
					<li>
						<i></i>
						<em>0</em>
						<i></i>
						<span>
							单价：<strong class="price">14.5元 </strong> 小计：<strong class="sum">0元</strong>
						</span>
					</li>
				</ul>
				<div class="info" id="info">
					<span>商品公合计：<em>0</em>件</span>
					<span>共花费了：<em>0</em>元</span>
					<br />
					<br />
					<span>其中最贵的商品单价是：<em>0</em>元</span>
				</div>
			</div>
		</div>
<script>

	// const list = document.getElementById('list');
	// const lis = list.children;
	// let lis1 = lis[0];
	// const btns = lis1.getElementsByTagName('i');//2按钮
	// const cont = lis1.getElementsByTagName('em')[0];
	// const strongs = lis1.getElementsByTagName('strong');

	// //++
	// btns[1].onclick = function(){
	// 	cont.innerHTML = ++ cont.innerHTML;
	// 	strongs[1].innerHTML = cont.innerHTML * parseFloat(strongs[0].innerHTML) + '元';
	// }


	const list = document.getElementById('list');
	const lis = list.children;
	let ems = list.getElementsByTagName('em'); //所有的个数
	let prices = list.getElementsByClassName('price'); //所有的单价
	let sumall = list.getElementsByClassName('sum');//所有的小计

	let total = 0; //合计
	let cost = 0; //共花费
	let price = 0; //最贵


	for(let i=0;i<lis.length;i++){
		fn(lis[i]); //多个li中的计数器
	}

	//执行一个计数器  ele某一个li
	function fn(ele){
		let lis1 = ele;
		const btns = lis1.getElementsByTagName('i');//2按钮
		const cont = lis1.getElementsByTagName('em')[0];
		const strongs = lis1.getElementsByTagName('strong');
		//++
		btns[1].onclick = function(){
			cont.innerHTML = ++ cont.innerHTML;
			strongs[1].innerHTML = cont.innerHTML * parseFloat(strongs[0].innerHTML) + '元';
		
			//统计
			total = cost = price = 0;

			for(let i=0;i<ems.length;i++){
				total += parseFloat(ems[i].innerHTML);
				cost += parseFloat(sumall[i].innerHTML);
				
				//有选中商品
				if(ems[i].innerHTML > 0){
					if(price < parseFloat(prices[i].innerHTML)){
						price = parseFloat(prices[i].innerHTML);
					}
				}
			}
			// console.log(price)
			
		    console.log('总个数'+total,'总花费'+cost,'最贵'+price);
		}

		btns[0].onclick = function(){
			if(cont.innerHTML > 0){
				cont.innerHTML =  -- cont.innerHTML;
				strongs[1].innerHTML = cont.innerHTML * parseFloat(strongs[0].innerHTML) + '元';
			
				//统计
				total = cost = price = 0;

				for(let i=0;i<ems.length;i++){
					total += parseFloat(ems[i].innerHTML);
					cost += parseFloat(sumall[i].innerHTML);
					
					//有选中商品
					if(ems[i].innerHTML > 0){
						if(price < parseFloat(prices[i].innerHTML)){
							price = parseFloat(prices[i].innerHTML);
						}
					}
				}
				console.log('总个数'+total,'总花费'+cost,'最贵'+price);
			}
		}
	}
	










	
</script>
</body>

</html>